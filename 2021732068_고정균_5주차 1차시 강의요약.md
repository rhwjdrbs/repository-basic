# State Space Equation  

## 1. State의 개념  

**State(상태)** 란,  
시스템의 **현재 동작 상태를 완전히 나타낼 수 있는 최소한의 변수 집합**을 말한다.  

즉, 과거의 입력이나 출력 전체를 알 필요 없이  
**현재의 State 값만으로도 시스템의 미래 동작을 예측할 수 있는 변수들**이다.  
### 🔹 예시
- 질량–스프링–댐퍼 시스템에서의 State  
  → 변위(𝑥)와 속도(𝑥̇)  
- 전기회로에서의 State  
  → 인덕터 전류($𝑖_L$)와 커패시터 전압($𝑣_C$)

이처럼 State는 **에너지를 저장하는 요소(인덕터, 커패시터, 질량, 스프링 등)** 의 상태를 표현하며,  
시스템이 **시간에 따라 어떻게 변화하는지(동적 거동)** 를 기술하는 핵심 개념이다.

---

##  2. State Space Equation  

**State Space Equation**은 시스템의 동적 특성을  
**일반화된 벡터 형태의 미분방정식**으로 표현한 것이다.  

기존의 한 개 또는 여러 개의 미분방정식을  
**행렬과 벡터로 정리한 형태**라고 볼 수 있다.

### 🔹 기본 형태
$\dot{x}(t) = A x(t) + B u(t)$  
$y(t) = C x(t) + D u(t)$


- $( x(t) $): 상태벡터 (state vector)  
- $( u(t) $): 입력벡터 (input vector)  
- $( y(t) $): 출력벡터 (output vector)  
- $( A, B, C, D $): 시스템 행렬 (system matrices)

---

##  3. State Space 모델의 특징 및 장점

| 구분 | 내용 |
|------|------|
| 🔸 **일반성** | 선형·비선형, 단일·다입력 시스템 등 다양한 형태의 시스템 표현 가능 |
| 🔸 **구조적 표현** | 복잡한 미분방정식을 간단한 행렬 형태로 정리 가능 |
| 🔸 **해석 용이성** | 시스템 안정도, 제어 가능성, 관측 가능성 분석에 유리 |
| 🔸 **계산 효율성** | 컴퓨터 기반의 제어시스템 해석 및 설계에 적합 |

---

###  정리
- **State**: 시스템의 현재 상태를 완전히 기술하는 변수  
- **State Space Equation**: 상태변수와 입력·출력 간의 관계를 행렬 형태로 표현한 식  
- **의의**: 복잡한 시스템을 **수학적으로 체계적이고 확장성 있게 표현**할 수 있음

---


<img width="854" height="1000" alt="image" src="https://github.com/user-attachments/assets/e928cf41-5286-43d4-a5e7-94356f7f43f3" />

---

# State의 필요성과 도입 배경

---

## 1. State 개념의 도입 배경

시스템은 일반적으로 **미분방정식(수학적 모델링)** 으로 표현된다.  
하지만 컴퓨터나 여러 사람이 함께 문제를 해결할 때,  
“결국 **문제가 체계를 가진 형태**이면 좋겠다”는 요구가 생기면서  
**State(상태)** 라는 개념이 도입되었다.  

State를 설정하는 목적은  
> “문제를 푸는 과정에 체계를 부여하자”  
라는 것이다.

---

## 2. State 개념의 적용과 시스템 간 관계

이제부터는 시스템을 수식화하고,  
State라는 개념을 정의하여 **무엇이 의미를 가지는가**를 먼저 파악한다.  
그 후 이를 시스템에 적용하여 **State를 중심으로 문제를 풀어보는 방식**을 사용한다.  

즉,  
- 먼저 시스템에 적용할 요소를 정의하고,  
- 이를 기반으로 문제를 해석하고 해결하는 것이다.  

이 접근은 특히 **미분방정식 기반의 시스템 분석**에 효과적이다.

시스템들은 서로 영향을 주고받는 **복잡한 관계**를 가진다.  
State는 **입력(Input)** 에 영향을 받고, 동시에 **출력(Output)** 에도 영향을 미친다.  
더 나아가 State들끼리도 서로 영향을 주고받을 수 있어,  
결과적으로 **복합적이고 상호 연결된 구조**가 형성된다.

---

## 3. 정리

State를 중심으로 문제를 접근하면  
복잡한 미분방정식을 단순화하여 **행렬 방정식 형태로 표현**할 수 있다.  
이렇게 하면 컴퓨터가 계산하기 쉬워지고,  
**체계적이며 자동화된 방식으로 문제를 해결**할 수 있다.  

결국,  
State를 이용하면 시스템 해석과 제어를 더 **효율적이고 구조적으로 수행**할 수 있으며,  
컴퓨터에게 일을 시키기 쉽게 만드는 것이다.

---

<img width="854" height="1016" alt="image" src="https://github.com/user-attachments/assets/34c32a1a-25e5-466e-99ee-36158c74949b" />

---

## 1. State의 정의

이 예제에서는 **State를 2개** 정의한다.  
그 이유는 **미분방정식이 2차**이기 때문이다.  
즉, 미분방정식의 차수가 2차이면 **State도 2개**가 된다.  

라플라스 변환을 통해 생각해보면,  
2차 미분방정식에서는 $s^2$ 항이 존재하며  
이는 **2개의 단항 함수(해)** 가 존재함을 의미한다.  
따라서 2개의 독립적인 상태 변수를 설정할 수 있다.

---

## 2. 수식 표현

스프링–질량–댐퍼 시스템의 운동방정식은 다음과 같다.  

$$M \dfrac{d^2 y(t)}{dt^2} + b \dfrac{dy(t)}{dt} + k y(t) = F(t)$$

여기서 상태변수를 다음과 같이 정의한다.  
- $x_1(t) = y(t)$  
- $x_2(t) = \dfrac{dy(t)}{dt}$

이를 이용하면 다음과 같은 형태의 1차 미분방정식으로 변환된다.

$\dfrac{dx_1(t)}{dt} = x_2(t)$  

$\dfrac{dx_2(t)}{dt} = -\dfrac{b}{M}x_2(t) - \dfrac{k}{M}x_1(t) + \dfrac{1}{M}F(t)$  

출력식은 다음과 같다.  
$y(t) = x_1(t)$

---

## 3. 변환의 의미와 효과

2차 미분방정식은 위와 같이  
**두 개의 1차 미분방정식**으로 바꾸어 표현할 수 있다.  

2차 미분방정식이 직접 풀기 어려운 이유는  
고차 항들이 계산을 복잡하게 만들기 때문이다.  
이를 **연립 1차 방정식 형태로 변환**하면  
계산을 **행렬 연산 기반**으로 수행할 수 있다.

행렬 형태로 바꾸면 **1차 미분방정식과 동일한 구조**를 가지게 되고,  
계산은 결국 컴퓨터가 수행하기 쉬운 형태가 된다.  

즉,  
- 고차 미분방정식을 **1차 미분방정식의 집합으로 단순화**하고,  
- 이를 통해 **컴퓨터가 효율적으로 계산할 수 있도록** 만드는 것이  
  **State-Space 표현의 핵심 목적**이다.

  ---


<img width="873" height="987" alt="image" src="https://github.com/user-attachments/assets/ca8264a5-6ed3-4907-aa3c-72ee57ac1183" />


---

컴퓨터 입장에서도 **2차 미분방정식을 직접 푸는 것보다**,  
이를 **1차 미분방정식의 연립 형태로 바꾸어 푸는 것이 훨씬 효율적**이다.  

이 예제에서는 **R–L–C 회로**를 통해 상태변수를 정의하고  
이를 **State-Space 형태로 표현**한다.

---

## 1. 상태변수의 정의

R–L–C 회로에서 다음과 같이 상태변수를 정의한다.  

- $x_1(t) = v_C(t)$ : 커패시터의 전압  
- $x_2(t) = i_L(t)$ : 인덕터의 전류  

이때 입력과 출력은 다음과 같이 설정된다.  
- 입력(Input): $u(t)$  
- 출력(Output): $y(t) = v_o(t) = R x_2(t)$  

---

## 2. 회로 방정식 유도

KCL(전류 법칙)과 KVL(전압 법칙)을 적용하면 다음과 같다.  

**(1) 커패시터 전류 관계식**  
$i_C(t) = C \dfrac{dv_C(t)}{dt} = x_2(t) - u(t)$  
따라서,  
$\dfrac{dx_1(t)}{dt} = \dfrac{1}{C}(x_2(t) - u(t))$

**(2) 인덕터 전압 관계식**  
$v_L(t) = L \dfrac{di_L(t)}{dt} = -R x_2(t) - x_1(t) + u(t)$  
따라서,  
$\dfrac{dx_2(t)}{dt} = \dfrac{1}{L}(-R x_2(t) - x_1(t) + u(t))$

이 두 식을 정리하면,



$$
\dfrac{d}{dt} 
\begin{bmatrix}
x_1(t) \\
x_2(t)
\end{bmatrix}=
\begin{bmatrix}
0 & \dfrac{1}{C} \\
-\dfrac{1}{L} & -\dfrac{R}{L}
\end{bmatrix}
\begin{bmatrix}
x_1(t) \\
x_2(t)
\end{bmatrix}
+
\begin{bmatrix}
-\dfrac{1}{C} \\
\dfrac{1}{L}
\end{bmatrix}
u(t)
$$


출력식은 다음과 같다.  

$$
y(t) =
\begin{bmatrix}
0 \quad R
\end{bmatrix}
\begin{bmatrix}
x_1(t) \\
x_2(t)
\end{bmatrix}
$$

---

## 3. 상태 선택의 유연성

State는 **어떤 물리량을 선택하느냐에 따라 달라질 수 있다.**  
이 예제에서는 커패시터 전압과 인덕터 전류를 각각 상태로 두었지만,  
반대로 정의해도 큰 차이는 없다.  

중요한 것은 두 상태변수가 **서로 독립적**이어야 한다는 점이다.  
즉, 한 상태가 다른 상태에 종속되지 않도록 설정해야 한다.

예를 들어,
- $i_L$과 $i_R$을 각각 state로 설정하면 두 값이 사실상 동일하므로  
  독립적인 상태가 아니다.  
- $i_L$과 $v_o$를 동시에 state로 두면  
  $v_o = R i_L$ 관계로 인해 상호 종속적이므로 부적절하다.  

---

## 4. 정리

State는 문제를 해결하기 위해 **우리가 직접 정의하는 변수**이다.  
다만, 두 state가 **서로 독립적**이어야 하며  
**종속 관계(상관식)** 가 존재하면 적절한 상태변수로 사용할 수 없다.  

따라서 **독립적인 상태변수 두 개**를 올바르게 설정해주는 것이 중요하다.

---

<img width="870" height="951" alt="image" src="https://github.com/user-attachments/assets/7bb921c7-34c1-4287-9158-b565a5952576" />

---

## 1. 기본 개념

1차 미분방정식의 상태방정식은 다음과 같이 표현된다.  

$\dot{x}(t) = a x(t) + b u(t)$

이를 라플라스 변환하면,  

$sX(s) - x(0) = aX(s) + bU(s)$  
$(s - a)X(s) = x(0) + bU(s)$  
$X(s) = \dfrac{1}{s - a}x(0) + \dfrac{b}{s - a}U(s)$

역라플라스 변환을 적용하면,  

$x(t) = e^{at}x(0) + \int_{0}^{t} e^{a(t-\tau)} b u(\tau) d\tau$

이 식을 일반화하면,  

$x(t) = \Phi(t) x(0) + \int_{0}^{t} \Phi(t - \tau) b u(\tau) d\tau$  

여기서 $\Phi(t) = e^{at}$ 는 **상태전이행렬(State Transition Matrix)** 이다.

---

## 2. 식의 의미

위의 식은 크게 두 부분으로 나뉜다.

| 구분 | 수식 | 의미 |
|------|------|------|
| 초기 상태의 영향 | $\Phi(t) x(0)$ | 초기 조건으로부터 시스템이 시간에 따라 어떻게 변화하는지 |
| 입력의 영향 | $\int_{0}^{t} \Phi(t - \tau) b u(\tau) d\tau$ | 외부 입력이 시간에 따라 시스템에 어떤 영향을 주는지 |


왼쪽 식은 **초기 상태로부터의 변화**를 의미하며,  
이는 $\Phi(t)$ 에 의해 시간에 따라 변하는 것을 나타낸다.  

오른쪽 식은 **입력에 의해 영향을 받는 부분**으로,  
입력 $u(t)$ 이 $\Phi(t)$ 를 통해 시스템의 상태 변화에  
영향을 미치는 것을 표현한다.  

즉, 시스템의 전체 동작은  
**초기 상태에 의한 변동**과 **입력에 의한 변동**으로 나누어 볼 수 있다.
즉, **시스템의 응답**은  
1. **초기 상태에 의한 응답**과  
2. **입력에 의한 응답**의 **합**으로 표현된다.

---

## 3. 해석의 의의

- 왼쪽 항(주황색 부분)은 **초기 상태에 따른 자연응답**이다.  
- 오른쪽 항(파란색 부분)은 **입력에 따른 강제응답**이다.  

각 항의 계산 결과가 어떻게 나오는지보다,  
**초기 상태나 입력이 시스템에 어떤 영향을 미치는가**가 더 중요하다.  

---

## 4. 요약

- **$\Phi(t)$** 는 시스템의 시간적 변화를 나타내는 핵심 행렬이다.  
- 1차 미분방정식 하나로 표현된 형태는  
  결국 **행렬 형태의 1차 연립 미분방정식**으로 확장할 수 있다.  
- 고차 미분방정식도 동일한 구조로 일반화되며,  
  **State-Space 형태로 정리하면 계산이 단순하고 의미가 명확**해진다.

  ---


<img width="891" height="971" alt="image" src="https://github.com/user-attachments/assets/98b92c85-6efe-4f3e-a5ca-4235c11a5660" />

---


## 1. 상태벡터 (State Vector)

상태변수들을 하나의 벡터로 묶어 표현한 것을 **상태벡터(State Vector)** 라고 한다.

$$ x(t) = 
\begin{bmatrix}
x_1(t) \\
x_2(t) \\
\vdots \\
x_n(t)
\end{bmatrix}
$$

이 벡터는 시스템의 모든 상태를 동시에 포함하며,  
이를 통해 여러 개의 1차 미분방정식을 **하나의 벡터식**으로 표현할 수 있다.

---

## 2. 상태공간 방정식 (State Space Equation)

상태공간 방정식은 다음 두 식으로 구성된다.

1. **State Differential Equation (상태방정식)**  
   시스템의 동적 특성을 나타내며,  
   여러 개의 1차 미분방정식을 하나의 행렬 형태로 정리한 식이다.  
   $\dot{x}(t) = A x(t) + B u(t)$

2. **Output Equation (출력방정식)**  
   상태벡터와 입력을 조합하여 시스템의 출력을 표현한 식이다.  
   $y(t) = C x(t) + D u(t)$

---

## 3. 행렬 표현의 의미

상태공간 방정식에서는 A, B, C, D가 모두 **행렬(Matrix)** 형태로 표현된다.  
따라서 다차 미분방정식의 복잡한 항들을  
행렬 연산 한 번으로 표현할 수 있어 계산이 간단해진다.

예를 들어, 3차 미분방정식이라면 다음과 같이 3개의 state가 정의된다.  
$x_1(t), x_2(t), x_3(t)$  
이들은 각각 독립적인 상태를 이루며 벡터 형태로 묶인다.

---

## 4. State Space Equation의 구조적 의미

| 구성 요소 | 역할 |
|------------|------|
| $A$ | 시스템의 내부 상태 변화 (상태 간 상호작용) |
| $B$ | 입력이 상태에 미치는 영향 |
| $C$ | 상태가 출력에 미치는 영향 |
| $D$ | 입력이 출력에 직접적으로 미치는 영향 |

---

## 5. 정리 및 장점

- **State Differential Equation** : 다차 미분방정식을 여러 개의 1차식으로 분리한 결과  
- **Output Equation** : 상태와 입력을 조합하여 출력을 구하는 식  
- **State Space Equation** : 위 두 식을 합친 시스템의 종합 표현  

결국, 고차 미분방정식을 **행렬 형태의 1차 미분방정식 집합**으로 변환한 것이다.  

### 장점
- **수식의 구조적 명확성**: 복잡한 시스템을 행렬로 간결하게 표현 가능  
- **컴퓨터 계산 용이성**: 행렬 연산 기반으로 연산 효율이 높다  
- **해석적 의미 강화**: 상태변수의 물리적 의미가 명확해진다  

따라서, state라는 개념을 도입함으로써  
복잡한 시스템의 분석과 제어가 훨씬 **체계적이고 계산적으로 효율적**이 된다.

---


<img width="814" height="734" alt="image" src="https://github.com/user-attachments/assets/e5286d0b-9e75-4057-83cc-dbbd7b898dc6" />

---

## 1. 개념 정리

**State Transition Matrix (상태전이행렬)** 은  
시스템의 상태가 시간에 따라 어떻게 변화하는지를 나타내는 핵심 수학적 도구이다.  

1차 미분방정식의 해에서 시작하여,  
이를 **다차(고차) 미분방정식** 및 **행렬 형태의 시스템**으로 확장하면  
상태전이행렬의 개념이 자연스럽게 등장한다.

---

## 2. 1차 및 n차 시스템의 해

**(1) 1차 시스템의 해**

$x(t) = e^{at}x(0) + \int_{0}^{t} e^{a(t-\tau)}b u(\tau)d\tau$

**(2) n차 시스템의 해**

$x(t) = \exp(At)x(0) + \int_{0}^{t} \exp[A(t-\tau)]Bu(\tau)d\tau$

이 식은 1차 미분방정식의 해를 **행렬 형태로 일반화**한 것이다.  
여기서 $A$와 $B$는 각각 시스템의 상태변화와 입력 영향을 나타내는 행렬이다.

---

## 3. 라플라스 변환을 이용한 유도

상태방정식  
$\dot{x}(t) = A x(t) + B u(t)$  
에 라플라스 변환을 적용하면 다음과 같다.

$sX(s) - x(0) = A X(s) + B U(s)$

정리하면,  
$(sI - A)X(s) = x(0) + B U(s)$  
$X(s) = [sI - A]^{-1}x(0) + [sI - A]^{-1}B U(s)$

여기서  
$\Phi(s) = [sI - A]^{-1}$  
를 **State Transition Function의 라플라스 영역 표현**이라 한다.

---

## 4. 시간 영역 표현

$\Phi(s)$를 역라플라스 변환하면 시간 영역의 상태전이행렬 $\Phi(t)$가 된다.

$\Phi(t) = \mathcal{L}^{-1}\{[sI - A]^{-1}\}$

따라서 상태변수의 해는 다음과 같이 표현된다.

$x(t) = \Phi(t)x(0) + \int_{0}^{t} \Phi(t - \tau) B u(\tau)d\tau$

이때,
- 첫 번째 항 $\Phi(t)x(0)$ 은 **초기 상태에 의한 변화**,  
- 두 번째 항 $\int_{0}^{t} \Phi(t - \tau) B u(\tau)d\tau$ 은 **입력에 의한 변화**를 의미한다.

---

## 5. 해석적 의미

1. 1차 미분방정식에서 사용된 지수함수 $e^{at}$ 는  
   다차 시스템에서는 **행렬지수함수 $e^{At}$ (또는 $\Phi(t)$)** 로 확장된다.  
2. 즉, 시스템이 다차원이 될수록 여러 개의 상태값이 행렬 형태로 결합되어  
   복합적으로 시간에 따라 변화하는 것을 나타낸다.  
3. 결과적으로 **행렬 $A$와 $B$를 이용하여 다차 미분방정식을 1차 연립방정식 형태로 변환**하는 것이  
   상태공간 표현의 핵심이다.

---

## 6. 정리

- **$\Phi(t)$ (State Transition Matrix)** :  
  시스템의 상태가 시간에 따라 어떻게 변하는지를 나타내는 함수  
- **핵심 역할** :  
  초기 상태의 변화와 입력에 의한 변화를 구분하여 계산할 수 있게 함  
- **최종 목적** :  
  다차 미분방정식을 **1차 행렬 미분방정식 형태로 변환**하여  
  계산 및 해석을 효율적으로 수행할 수 있도록 하는 것이다.

---


<img width="955" height="912" alt="image" src="https://github.com/user-attachments/assets/a6e033fc-0202-4d0f-8c37-5c142a255710" />

---

## 1. 문제 구조와 차수

이 예제는 두 개의 질량에 스프링과 댐퍼가 연결된 시스템으로, 각 질량에 대해 하나의 2차 미분방정식이 생기므로 **총 4차 미분방정식**이 된다.  
따라서 상태공간 표현으로 바꾸면 **서로 결합된 1차 미분방정식 4개**로 구성되는 시스템이 된다.

---

## 2. 상태 변수 선택

변위와 속도를 상태로 잡으면 자연스럽고 계산이 간편하다.

- $x_1(t)=q(t)$, $x_2(t)=\dot q(t)$  
- $x_3(t)=p(t)$, $x_4(t)=\dot p(t)$

이 선택에 따라 다음과 같은 1차식 두 쌍이 기본적으로 생긴다.

- $\dot x_1 = x_2$  
- $\dot x_3 = x_4$

나머지 두 식은 뉴턴 제2법칙과 스프링·댐퍼의 선형식(후크 법칙, 점성마찰)을 적용하여 얻는다.

---

## 3. 상태방정식의 일반형

계통 파라미터(질량 $M_1, M_2$, 스프링 상수 $k_i$, 점성계수 $b_i$)와 외력 $u(t)$의 부호 규약에 따라 계수만 달라질 뿐, 구조는 아래와 같이 동일하다.

$$
\begin{aligned}
\dot x_1 &= x_2 \\
\dot x_2 &= a_{21}x_1 + a_{22}x_2 + a_{23}x_3 + a_{24}x_4 + b_2\,u(t) \\
\dot x_3 &= x_4 \\
\dot x_4 &= a_{41}x_1 + a_{42}x_2 + a_{43}x_3 + a_{44}x_4 + b_4\,u(t)
\end{aligned}
$$

이를 행렬로 쓰면 다음과 같다.

$$
\dot x(t)=Ax(t)+Bu(t),
\qquad x =
\begin{bmatrix}
x_1 \\
x_2 \\
x_3 \\
x_4
\end{bmatrix}
$$



$$
A=
\begin{bmatrix}
0 & 1 & 0 & 0 \\
a_{21} & a_{22} & a_{23} & a_{24} \\
0 & 0 & 0 & 1 \\
a_{41} & a_{42} & a_{43} & a_{44}
\end{bmatrix},
\quad
B=
\begin{bmatrix}
0 \\ 
b_2 \\ 
0 \\ 
b_4
\end{bmatrix}
$$

여기서 $a_{ij}$와 $b_i$는 $M_1, M_2, k_1, k_2, b_1, b_2$의 조합으로 결정되는 상수이다  
(예: 스프링·댐퍼가 직렬·병렬로 어떻게 연결되었는지에 따라 $-\tfrac{k}{M}$, $-\tfrac{b}{M}$, 교차항 $\pm\tfrac{k}{M}$, $\pm\tfrac{b}{M}$ 형태가 된다).

---

## 4. 출력 방정식

관측하려는 물리량에 따라 $C, D$를 정한다.

- 변위 출력 $y(t) = [\, q(t)\;\; p(t)\,]^\top$ 이면  

$$
C =
\begin{bmatrix}
1 & 0 & 0 & 0 \\
0 & 0 & 1 & 0
\end{bmatrix},
\quad
D = 0
$$

이다.
- 속도나 한 질량의 변위만 필요하면 해당 행만 남기면 된다.

즉, 일반형은 $y(t)=Cx(t)+Du(t)$ 이다.

---

## 5. 확인 포인트

- 2개의 2차 미분방정식 → 상태 4개 → 1차 연립방정식 4개가 나온다.  
- 상태 선택을 $[q,\dot q,p,\dot p]$로 잡으면 $A$의 골격이 상삼각 블록 형태가 되어 해석과 시뮬레이션이 용이하다.  
- 계수 $a_{ij}$는 연결 구조에 따라 기계적 평형식에서 직접 읽어낼 수 있으므로, 실제 수치는 도면의 스프링·댐퍼 배치를 기준으로 계산하면 된다.

---


<img width="959" height="950" alt="image" src="https://github.com/user-attachments/assets/4dba7a93-5f00-4388-b8f6-6649502156f3" />

---

## 1. MATLAB을 이용한 시스템 구성

MATLAB에서는 **State-Space Equation**을 다음과 같이 정의한다.

$\dot{x}(t) = A x(t) + B u(t)$  
$y(t) = C x(t) + D u(t)$

여기서 $A$, $B$, $C$, $D$는 각각 시스템 행렬이다.  
MATLAB에서는 이 네 행렬을 `ss()` 명령어를 이용하여 하나의 시스템 객체로 묶을 수 있다.

---

## 2. MATLAB 코드 구성 예시

예를 들어, 4차 시스템의 파라미터(스프링 상수, 댐퍼 계수, 질량 등)를 설정한 뒤  
이를 토대로 $A$, $B$, $C$, $D$ 행렬을 정의한다.

```matlab
% 시스템 파라미터
M1 = 1; M2 = 1;
b1 = 0.2; b2 = 0.2;
k1 = 1; k2 = 1;

% 행렬 정의
A = [0 1 0 0;
    -(k1+k2)/M1 -(b1+b2)/M1 k2/M1 b2/M1;
     0 0 0 1;
     k2/M2 b2/M2 -k2/M2 -b2/M2];

B = [0; 1/M1; 0; 0];
C = [1 0 0 0];
D = 0;

% 상태공간 시스템 생성
sys = ss(A, B, C, D);
